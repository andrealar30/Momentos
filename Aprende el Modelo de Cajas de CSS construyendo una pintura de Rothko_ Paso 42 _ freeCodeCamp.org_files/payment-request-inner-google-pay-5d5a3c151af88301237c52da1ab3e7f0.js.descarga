!function(){"use strict";function t(e){var i=a[e];if(void 0!==i)return i.exports;var o=a[e]={exports:{}};return n[e](o,o.exports,t),o.exports}var e,n={31506:function(t,e,n){var a,i=n(77904),o=n(18489),r=n(50508),s=n(6589),p=n(71873),c=n(36617),l=n(63630),u=n(27853),h=n(84531),d=n(12024),_=n(69620),y=n(91493),m=n(73696),v=n(17948),f=function(t){return{country:t.countryCode||"",region:t.administrativeArea||"",city:t.locality||"",postalCode:t.postalCode||"",recipient:t.name||"",phone:t.phoneNumber||"",sortingCode:t.sortingCode||"",addressLine:[t.address1||null,t.address2||null,t.address3||null].reduce((function(t,e){return null!=e?[].concat((0,m.Z)(t),[e]):t}),[]),dependentLocality:"",organization:""}},g=function(t,e){var n=t.id;return e.filter((function(t){return n===t.id}))[0]},O=function(t,e,n){var a=t.paymentMethodData.info.billingAddress;return(0,o.Z)((0,o.Z)({complete:n,token:JSON.parse(t.paymentMethodData.tokenizationData.token.trim()),shippingAddress:t.shippingAddress?f(t.shippingAddress):null,shippingOption:t.shippingOptionData&&e.shippingOptions?g(t.shippingOptionData,e.shippingOptions):null,payerEmail:t.email||null},a?{payerName:a.name||null,payerPhone:a.phoneNumber||null}:{}),{},{walletName:"googlePay",methodName:"google-pay"})},P=function t(e){var n=this;(0,u.Z)(this,t),this.loadPaymentData=function(t){return n._client.loadPaymentData(t)},this.isReadyToPay=function(t){return n._client.isReadyToPay(t)},this._client=new google.payments.api.PaymentsClient(e)},C=n(24643),E=n(40939),w=function(){function t(e,n,a,i){var c=this;(0,u.Z)(this,t),this._eventHandler=function(){},this._previouslySelectedShippingAddress=null,this._previouslySelectedShippingOption=null,this._wasCompleted=!1,this._handlePaymentDataChanged=function(t){return new s.J((function(e){var n=t.shippingOptionData,a=t.shippingAddress;a&&!(0,d.Xy)(a,c._previouslySelectedShippingAddress)?c._emitEvent({type:"shippingaddresschange",payload:{shippingAddress:f(a),updateWith:function(t){"success"===t.status&&(c._previouslySelectedShippingAddress=(0,o.Z)({},a)),e(c._handleUpdateWith(t,"SHIPPING_ADDRESS"))}}}):n&&n.id!==c._previouslySelectedShippingOption&&c._latestPaymentOptions.shippingOptions?c._emitEvent({type:"shippingoptionchange",payload:{shippingOption:g(n,c._latestPaymentOptions.shippingOptions),updateWith:function(t){"success"===t.status&&(c._previouslySelectedShippingOption=n.id),e(c._handleUpdateWith(t,"SHIPPING_OPTION"))}}}):e({})}))},this._handleUpdateWith=function(t,e){var n=t.status,a=(0,r.Z)(t,["status"]);if("success"!==n)return{error:(0,y.t5)(e,n)};var i=c._latestPaymentOptions.shippingOptions;c._latestPaymentOptions=(0,o.Z)((0,o.Z)({},c._latestPaymentOptions),a);var s=(0,y._t)(c._latestPaymentOptions,c._merchantDetails),p=s.transactionInfo,l=s.shippingOptionParameters,u={newTransactionInfo:p};return!(0,d.Xy)(c._latestPaymentOptions.shippingOptions,i)&&(u.newShippingOptionParameters=l),u},this._handlePaymentAuthorized=function(t){return new s.J((function(e){c._emitEvent({type:"paymentresponse",payload:O(t,c._latestPaymentOptions,(function(t){"success"===t&&(c._wasCompleted=!0),e((0,y.AH)(t))}))})}))},this.setEventHandler=function(t){c._eventHandler=t},this.abort=function(){},this.update=function(t){var e=t.__merchantDetails,n=t.__stripeUserCredentials,a=(0,r.Z)(t,["__merchantDetails","__stripeUserCredentials"]);c._setPaymentOptions((0,d.PM)(c._latestPaymentOptions,a)),c._merchantDetails=(0,d.PM)(c._merchantDetails,e),n&&(c._merchantDetails.apiKey=n.apiKey,c._merchantDetails.accountId=n.accountId)},this.show=function(){c._wasCompleted&&c._report("pr.show_called_after_completion");var t=(0,y._t)(c._latestPaymentOptions,c._merchantDetails);c._client.loadPaymentData(t).then((function(){c._emitEvent({type:"close"})})).catch((function(t){c._emitEvent({type:"close"});var e=function(t){var e=(0,p.ld)((0,p.mC)({statusCode:(0,p.kw)("CANCELED","BUYER_ACCOUNT_ERROR","DEVELOPER_ERROR","MERCHANT_ACCOUNT_ERROR","INTERNAL_ERROR"),statusMessage:(0,p.jt)(p.Z_)}),t,"Pay.js loadPaymentData.catch");return"error"===e.type?{tag:"EXCEPTION",error:t}:{tag:"PAYMENTS_ERROR",error:e.value}}(t);if("PAYMENTS_ERROR"===e.tag&&("CANCELED"===e.error.statusCode?c._emitEvent({type:"cancel"}):c._emitEvent({type:"error",payload:{errorMessage:e.error.statusMessage,errorCode:e.error.statusCode}})),"EXCEPTION"===e.tag)throw e.error}))},this.canMakePayment=function(){return c._clientUnavailable?s.J.resolve(!1):(0,E.R)(c._latestPaymentOptions.__betas).enabled?(0,C.Df)((function(){return c._canMakePaymentClient.isReadyToPay((0,y.XM)(c._latestPaymentOptions)).then((function(t){return c._report("pr.google_pay.activity_mode",{activityModeName:t.activityMode?v.d[t.activityMode]:"NO_MODE",activityMode:t.activityMode||-1}),function(t,e){var n=!!e.isCheckout||t.activityMode===v.h.PAYMENT_HANDLER||t.activityMode===v.h.ANDROID_NATIVE;return t.result&&!0===t.paymentMethodPresent&&n}(t,{isCheckout:!!c._latestPaymentOptions.__isCheckout})})).then((function(t){return c._report("pr.google_pay.can_make_payment_native_response",{available:t}),t}))})):s.J.resolve(!1)},this._authenticatedOrigin=a,this._setPaymentOptions(e),this._merchantDetails=(0,d.PM)(e.__merchantDetails,n),this._clientUnavailable=!1,this._report=i;var l=(0,_.lO)(n.apiKey)===_.Kl.live?"PRODUCTION":"TEST",h={paymentDataCallbacks:(0,o.Z)({onPaymentAuthorized:this._handlePaymentAuthorized},e.requestShipping?{onPaymentDataChanged:this._handlePaymentDataChanged}:{})};try{this._client=new P((0,o.Z)({environment:l},h)),this._canMakePaymentClient="TEST"===l?new P((0,o.Z)({environment:"PRODUCTION"},h)):this._client}catch(t){this._clientUnavailable=!0,this._report("error.pr.google_pay.client_unavailable",{errorMessage:t?t.message:"",error:t})}}return(0,h.Z)(t,[{key:"_setPaymentOptions",value:function(t){this._latestPaymentOptions=t,this._latestPaymentOptions.shippingOptions&&this._latestPaymentOptions.shippingOptions[0]&&(this._previouslySelectedShippingOption=this._latestPaymentOptions.shippingOptions[0].id)}},{key:"_emitEvent",value:function(t){this._eventHandler(t)}}]),t}(),b=n(939),D=n(66680),R=n(81743),k={authentication:(0,p.mC)({apiKey:p.Z_,accountId:(0,p.jt)(p.Z_)}),mids:(0,p.jt)(D.p),origin:p.Z_,controllerId:p.Z_,referrer:(0,p.jt)(p.Z_)},A={status:p.kw.apply(void 0,(0,m.Z)(Object.keys(R.qp)))},N=n(18812),M=function(t,e){e.warnings.forEach((function(e){t.warn(e)}))},S=function(t){return function(e){switch(e.type){case"shippingoptionchange":case"shippingaddresschange":var n=e.payload,a=n.updateWith,i=(0,r.Z)(n,["updateWith"]);t.waitForCallback(e.type,i).then((function(n){var i=function(t,e){return(0,p.Gu)(b.F4,t,"Google Pay ".concat(e," Callback"))}(n,e.type);M(t,i),a(i.value)}));break;case"paymentresponse":var o=e.payload,s=o.complete,c=(0,r.Z)(o,["complete"]);t.waitForCallback(e.type,c).then((function(e){var n=function(t,e){return(0,p.Gu)((0,p.mC)(A),t,e)}(e,"GooglePayPaymentRequest complete");M(t,n),s(n.value.status)}));break;case"cancel":t.event("pr-cancel");break;case"close":t.event("pr-close");break;case"error":t.event("pr-error",e.payload);break;case"__private_do_not_use_error":case"__private_do_not_use_billingaddresschange":case"__private_do_not_use_couponcodechange":break;default:(0,p.Rz)(e)}}},Z=function(t){var e,n,a=(e=t,n="payment-request-google-pay-inner.html",(0,p.Gu)((0,p.mC)(k),(0,c.vB)(e),n)),r=a.value,u=r.controllerId,h=r.authentication,d=new l.Z(u);M(d,a);var _=function(t,e){d.report(t,(0,o.Z)((0,o.Z)({},e),{},{backingLibrary:"GOOGLE_PAY"}))},y=new s.J((function(t){d.frameActionEvents.checkCanMakePayment.on(t)})),m=new s.J((function(t){d.unsafeAction("RETRIEVE_WALLET_CONFIG_AVAILABILITY",{wallet:"google_pay"}).then(t).catch((function(){return t(!1)}))}));d._events.initialize.on((function(t,e){var n=(0,c.Ds)(e),a=new w(t,(0,o.Z)((0,o.Z)({},h),{},{origin:e},t.__merchantDetails||{name:n?n.host:e}),e,_);a.setEventHandler(S(d)),y.then((function(t){var e=t.complete;s.J.all([a.canMakePayment(),m]).then((function(t){var n=(0,i.Z)(t,2),a=n[0],o=n[1];e({available:a&&o})}))})),m.then((function(t){t?d._events.show.on(a.show):d._events.show.on((function(){throw new N.No("We could not verify your domain for use with Google Pay. Please add your domain in your Dashboard.")}))})),d._events.abort.on(a.abort),d._events.update.on(a.update)})),d.event("load")};a=window.location.hash.substring(1).split("?")[0],Z(a)}},a={};t.m=n,e=[],t.O=function(n,a,i,o){if(!a){var r=1/0;for(l=0;l<e.length;l++){a=e[l][0],i=e[l][1],o=e[l][2];for(var s=!0,p=0;p<a.length;p++)(!1&o||r>=o)&&Object.keys(t.O).every((function(e){return t.O[e](a[p])}))?a.splice(p--,1):(s=!1,o<r&&(r=o));if(s){e.splice(l--,1);var c=i();void 0!==c&&(n=c)}}return n}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[a,i,o]},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t.j=4505,t.p="https://js.stripe.com/v3/",function(){var e={4505:0};t.O.j=function(t){return 0===e[t]};var n=function(n,a){var i,o,r=a[0],s=a[1],p=a[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(i in s)t.o(s,i)&&(t.m[i]=s[i]);if(p)var l=p(t)}for(n&&n(a);c<r.length;c++)o=r[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(l)},a=window.webpackChunkStripeJSinner=window.webpackChunkStripeJSinner||[];a.forEach(n.bind(null,0)),a.push=n.bind(null,a.push.bind(a))}();var i=t.O(void 0,[3712],(function(){return t(31506)}));i=t.O(i)}();
//# sourceMappingURL=https://js.stripe.com/v3/sourcemaps/payment-request-inner-google-pay-6b131d215a6be8f1ef2ea4258693e3e7.js.map